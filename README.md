# Mood-Visualizer

このプロジェクトは Author である [@mpyw](https://github.com/mpyw) の気分を継続的に記録し，可視化するプロジェクトです。

- データは全てリポジトリ上にコミットして保存されます。
- 記録は GitHub Actions の Workflow Dispatch を利用して行います。
- 可視化は GitHub Pages を利用して行います。

## 記録形式

`data/history-list.jsonl` ファイルに JSONL 形式で年月が記録されます。これは当年月最初のデータ追加時にのみ更新されるファイルです。

```json lines
{"date":"2025-01"}
{"date":"2025-02"}
{"date":"2025-03"}
```

また各年月の記録データが `data/history/[YYYY-MM].jsonl` ファイルに JSONL 形式で追加されます。

```json lines
{"date":"2025-01-01T00:00:00+09","score":5}
{"date":"2025-01-01T12:00:00+09","score":6,"note":"楽しいことがあった！"}
{"date":"2025-01-02T09:00:00+09","score":4,"note":"今日はロースタート"}
```

コミットメッセージは以下の形式に従います。

```text
YYYY-MM-DDTHH:MM:SS+09:00 / Score [スコア]

[ノート]
```

| フィールド   | Required  | 説明                          |
|:--------|:---------:|:----------------------------|
| `date`  |     ✓     | 記録日時。ISO 8601 形式でタイムゾーンを含む。 |
| `score` |     ✓     | 気分のスコア。0 から 10 の整数。         |
| `note`  |           | 任意のメモ。自由なコメント。              |

## 閲覧形式

可視化はトップレベルの `index.html` ファイルで JSONL ファイルをフェッチして行います。

- このファイルは React ベースのシングルページアプリケーションです。
- 起動時に `data/history/[YYYY-MM].jsonl` をフェッチし，気分のスコアをグラフ化します。
- グラフは年月ごとに描画されます。
- デフォルトで現在の年月のグラフが表示されますが，プルダウンで過去の年月を選択して振り返ることもできます。
- プロットは日付単位で行われ，スコアの平均値が表示されます。
- 一日の中でスコアが変動した場合は，範囲が表示されます。

また，キャンバスへの描画結果を PNG 画像としてダウンロードする機能もあります。
